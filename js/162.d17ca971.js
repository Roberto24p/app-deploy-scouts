"use strict";(globalThis["webpackChunktesis_scout_front"]=globalThis["webpackChunktesis_scout_front"]||[]).push([[162],{1162:(e,l,a)=>{a.r(l),a.d(l,{default:()=>G});var t=a(3673),o=a(2323),n=a(1959),s=a(9814),u=a(2591),c=a(9582),d=a(8825);const i={class:"q-pa-md"},m={class:"row q-col-gutter-md"},r={class:"col-md-6 col-sm-12 row"},p={class:"col-12"},w=["src"],g={class:"col-12 q-mt-md"},_=(0,t.Uk)(" Progreso del Plan de Adelanto "),f=(0,t.Uk)(" Progreso: "),v={class:"absolute-full flex flex-center"},h={class:"col-md-6 col-sm-12"},W=(0,t.Uk)(" Plan de Adelanto "),b={class:"col-12"},k=(0,t._)("strong",null,"Plan de Adelanto",-1),q={class:"q-pa-none",style:{"max-width":"350px"}},y=(0,t.Uk)("Enviar"),Z=(0,t._)("div",{class:"text-h6"},"Mensaje de Confirmación",-1),Q=(0,t._)("span",{class:"q-ml-sm"},"¿Deseas actualizar el plan de adelanto?",-1),x={__name:"AdvancePlanScout",setup(e){const l=(0,d.Z)(),a=((0,n.iH)(!1),(0,c.yj)()),x=(0,n.qj)({name:"",email:"",avatarScout:""}),C=(0,n.qj)({}),S=(0,n.iH)({}),j=(0,n.iH)([]),P=(0,n.iH)(!0),H=(0,n.iH)("parche tierno"),I=(0,n.iH)(""),V=(0,n.iH)(!1),z=(0,n.iH)([]);let U=[];const D=()=>{s.Z.getChecks(a.params.scoutId).then((e=>{if(console.log(e),0==e.topics.length)return P.value=!1,0;e.topics.forEach((e=>{C[e.topic_id].check=!0}))}))},A=()=>{V.value=!0},T=()=>{const e=localStorage.getItem("token");l.loading.show(),fetch("http://157.245.142.215/api-scouts/public/api/checkadvanceplan",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({scout_id:a.params.scoutId,topics:U}),method:"POST"}).then((e=>e.json())).then((e=>{l.loading.hide(),console.log(e),e.topics.forEach((e=>{console.log(C[e.id]),C[e.topic_id].check=!0})),S.value={},U=[],l.notify({type:"positive",message:"Plan de adelanto actualizado correctamente",timeout:"2000"}),B(),D(),K()})).catch((e=>console.log(e)))},E=e=>{console.log(e);const l=U.findIndex((l=>l==e));return-1==l&&0==C[e].disable?(S.value[e]=e,U.push(e)):U.splice(l,1),0},Y=()=>{u.Z.getScoutData(a.params.scoutId).then((e=>{x.avatarScout=e.scout.person.image,x.name=e.scout.person.name,x.email=e.scout.person.user.email,console.log(e)}))},K=()=>{s.Z.getPercent(a.params.scoutId).then((e=>{I.value=e}))},B=()=>{s.Z.getRecognitionsComplete(a.params.scoutId).then((e=>{1==e.success&&(z.value=e.recog,e.recogIncump.forEach(((e,l)=>{0==l&&e.topics.forEach((e=>{C[e.id].disable=!1}))})))}))},L=()=>{s.Z.advancePlanDetails(a.params.scoutId).then((e=>{e[0].recognitions.forEach(((e,l)=>{e.topics.forEach((e=>{const l={id:e.id,name:e.name,check:!1,disable:!0};C[e.id]=l})),console.log(e.topics.length)})),j.value=e[0].recognitions,H.value=j.value[0].name}))};return K(),Y(),L(),B(),D(),(e,l)=>{const a=(0,t.up)("q-avatar"),n=(0,t.up)("q-item-section"),s=(0,t.up)("q-item-label"),u=(0,t.up)("q-item"),c=(0,t.up)("q-card"),d=(0,t.up)("q-separator"),P=(0,t.up)("q-badge"),U=(0,t.up)("q-linear-progress"),D=(0,t.up)("q-icon"),Y=(0,t.up)("q-scroll-area"),K=(0,t.up)("q-tab"),B=(0,t.up)("q-tabs"),L=(0,t.up)("q-checkbox"),N=(0,t.up)("q-list"),O=(0,t.up)("q-tab-panel"),J=(0,t.up)("q-tab-panels"),M=(0,t.up)("q-btn"),R=(0,t.up)("q-card-section"),$=(0,t.up)("q-card-actions"),F=(0,t.up)("q-dialog"),G=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[(0,t._)("div",m,[(0,t._)("div",r,[(0,t._)("div",p,[(0,t.Wm)(c,{class:"my-card q-py-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{square:""},{default:(0,t.w5)((()=>[(0,t._)("img",{src:""==x.avatarScout||null==x.avatarScout?"https://png.pngtree.com/png-vector/20190116/ourlarge/pngtree-vector-avatar-icon-png-image_322275.jpg":x.avatarScout},null,8,w)])),_:1})])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("strong",null,(0,o.zw)(x.name),1)])),_:1}),(0,t.Wm)(s,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(x.email),1)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,t._)("div",g,[(0,t.Wm)(c,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{caption:""},{default:(0,t.w5)((()=>[_])),_:1})])),_:1})])),_:1}),(0,t.Wm)(d),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(P,{color:"white text-black"},{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(U,{size:"25px",value:I.value,color:I.value<=.5?"secondary":I.value>.5&&I.value<.99?"warning":"positive",style:{"border-radius":"10px"}},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.Wm)(P,{color:"white","text-color":"accent",label:100*I.value+"%"},null,8,["label"])])])),_:1},8,["value","color"])])),_:1})])),_:1})])),_:1})])]),(0,t._)("div",h,[(0,t.Wm)(Y,{class:"fit col-sm-12",style:{height:"100%","max-width":"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{position:"sticky",top:"1px","z-index":"100","background-color":"white",border:"#1976D2 solid 1px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,{caption:""},{default:(0,t.w5)((()=>[W])),_:1})])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(z.value,(e=>((0,t.wg)(),(0,t.j4)(u,{key:e.id},{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{style:{"font-size":"2em"},name:"check",color:"green",class:"q-ml-md"})])),_:1})])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("strong",null,(0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})]),(0,t._)("div",b,[(0,t.Wm)(c,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(s,{caption:""})])),_:1})])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(B,{modelValue:H.value,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value=e),"narrow-indicator":"",dense:"",align:"justify",class:"bg-grey-1"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(j.value,(e=>((0,t.wg)(),(0,t.j4)(K,{label:e.name,class:"text-cyan",key:e.id,name:e.name},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(d),(0,t.Wm)(J,{modelValue:H.value,"onUpdate:modelValue":l[1]||(l[1]=e=>H.value=e),animated:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(j.value,(e=>((0,t.wg)(),(0,t.j4)(O,{key:e.id,name:e.name},{default:(0,t.w5)((()=>[(0,t._)("div",q,[(0,t.Wm)(N,{dense:"",bordered:"",class:"rounded-borders"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.topics,(e=>((0,t.wg)(),(0,t.j4)(u,{tag:"label",key:e.id,class:"q-mb-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{side:"",top:""},{default:(0,t.w5)((()=>[C[e.id].check&&S.value[e.id]!=e.id?((0,t.wg)(),(0,t.j4)(D,{key:1,style:{"font-size":"2.5em"},name:"tasks",color:"green",class:"q-ml-md"})):((0,t.wg)(),(0,t.j4)(L,{key:0,modelValue:C[e.id].check,"onUpdate:modelValue":l=>C[e.id].check=l,disable:C[e.id].disable,onClick:l=>E(e.id)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]))])),_:2},1024),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(M,{color:"blue",class:"q-ma-lg",onClick:A},{default:(0,t.w5)((()=>[y])),_:1})])),_:1})])),_:1})])),_:1})])])]),(0,t.Wm)(F,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(R,null,{default:(0,t.w5)((()=>[Z])),_:1}),(0,t.Wm)(R,{class:"row items-center"},{default:(0,t.w5)((()=>[Q])),_:1}),(0,t.Wm)($,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(M,{flat:"",label:"No",color:"primary"},null,512),[[G]]),(0,t.wy)((0,t.Wm)(M,{flat:"",label:"Si",color:"primary",onClick:T},null,512),[[G]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var C=a(151),S=a(3414),j=a(2035),P=a(5096),H=a(2350),I=a(5869),V=a(9721),z=a(1598),U=a(7704),D=a(4554),A=a(7547),T=a(3269),E=a(5906),Y=a(6602),K=a(7011),B=a(5735),L=a(8240),N=a(6778),O=a(5589),J=a(9367),M=a(677),R=a(7518),$=a.n(R);const F=x,G=F;$()(x,"components",{QCard:C.Z,QItem:S.Z,QItemSection:j.Z,QAvatar:P.Z,QItemLabel:H.Z,QSeparator:I.Z,QBadge:V.Z,QLinearProgress:z.Z,QScrollArea:U.Z,QIcon:D.Z,QTabs:A.Z,QTab:T.Z,QTabPanels:E.Z,QTabPanel:Y.Z,QList:K.Z,QCheckbox:B.Z,QBtn:L.Z,QDialog:N.Z,QCardSection:O.Z,QCardActions:J.Z}),$()(x,"directives",{ClosePopup:M.Z})}}]);