"use strict";(globalThis["webpackChunktesis_scout_front"]=globalThis["webpackChunktesis_scout_front"]||[]).push([[289],{289:(e,l,a)=>{a.r(l),a.d(l,{default:()=>K});var o=a(3673),s=a(8880),n=a(1959),t=a(386),i=a(8825);const u={class:"q-pa-md"},m=["src"],r=(0,o._)("div",{class:"text-h6"},"Alerta",-1),d=(0,o.Uk)(" ¿Desea eliminar el grupo seleccionado? "),c=(0,o.Uk)("Nuevo Grupo"),p=(0,o.Uk)("Close"),g={class:"col-6 text-center"},w={class:"col-md-4 col-sm-12"},f=(0,o.Uk)("Agregar Unidad"),y={class:"col-md-7 col-sm-12"},_=(0,o._)("span",{class:"q-ml-sm"},"Deseas eliminar el grupo seleccionado?",-1),b={__name:"Groups",setup(e){const l=(0,i.Z)(),a=(0,n.iH)(!1),b=(0,n.iH)(!1),h=(0,n.iH)(!1),W=(0,n.iH)(!1),q=[{name:"img",label:"Logo"},{name:"name",required:!0,label:"Nombre",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"address",align:"left",label:"Dirección",field:"addres",sortable:!0},{name:"actions",label:"Acciones"}],v=["Manada","Tropa","Clan"],k=(0,n.iH)([]),V=(0,n.iH)(!1),C=(0,n.qj)({name:"",addres:"",img_url:"",id:"",units:[]}),Z=e=>{const l=(0,n.qj)({name:""});e.teams.push(l)},Q=e=>{t.Z.activateGroup(e.id).then((e=>{console.log(e),1==e.success&&T()}))},x=(e,l)=>{const a=l.map((e=>e.id)).indexOf(e.id);-1!=a&&l.splice(a,1)},U=()=>{console.log("Hola mundo");const e=(0,n.qj)({name:"",img:"",teams:[]});C.units.push(e)},A=e=>{h.value=!0,b.value=!1,console.log(e),C.name=e.name,C.addres=e.addres,C.img_url=e.image,C.id=e.id},D=()=>{h.value=!0,b.value=!0};async function H(){const e={name:C.name,addres:C.addres,image:C.img_url},l=await t.Z.put(C.id,e);C.name="",C.addres="",C.img_url="",C.units=[],console.log(l),h.value=!1,T()}async function T(){l.loading.show();const e=await t.Z.getGroups();console.log(e),k.value=e,l.loading.hide()}async function G(e){console.log(e),W.value=!0,C.id=e.id}const z=async()=>{const e=await t.Z["delete"](C.id);console.log(e),e.success?(T(),l.notify({type:"success",message:e.message,timeout:2e3})):l.notify({type:"negative",message:e.message,timeout:2e3}),C.id=""};function F(){let e=!1;if(""==C.name||""==C.addres)return e=!0,l.notify({type:"negative",message:"Complete los datos"}),0;if(0==e&&(C.units.forEach((l=>{l.name,""==l.type&&(e=!0)})),C.units.forEach((l=>{l.teams.forEach((l=>{""==l.name&&(e=!0)}))}))),1==e)return l.notify({type:"negative",message:"Complete los datos"}),0;const a={name:C.name,addres:C.addres,image:C.img_url,units:C.units};t.Z.post(a).then((e=>{h.value=!1,T(),console.log(e),C.name="",C.addres="",C.img_url="",C.id="",C.units=[],l.notify({type:"positive",message:"Grupo creado correctamente"})}))}const N=()=>new Promise(((e,l)=>{const a=localStorage.getItem("token");e({url:"http://157.245.142.215/api-scouts/public/api/fileGroup",methid:"POST",headers:[{name:"Authorization",value:`Bearer ${a}`}]})})),O=e=>{C.img_url=e.xhr.response};return T(),(e,l)=>{const n=(0,o.up)("q-btn"),t=(0,o.up)("q-td"),i=(0,o.up)("q-avatar"),T=(0,o.up)("q-inner-loading"),I=(0,o.up)("q-table"),S=(0,o.up)("q-card-section"),j=(0,o.up)("q-card-actions"),K=(0,o.up)("q-card"),E=(0,o.up)("q-dialog"),B=(0,o.up)("q-toolbar-title"),J=(0,o.up)("q-space"),P=(0,o.up)("q-tooltip"),R=(0,o.up)("q-bar"),Y=(0,o.up)("q-img"),L=(0,o.up)("q-input"),$=(0,o.up)("q-uploader"),M=(0,o.up)("q-icon"),X=(0,o.up)("q-select"),ee=(0,o.up)("q-form"),le=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",u,[(0,o.Wm)(n,{label:"Agregar",color:"primary",class:"q-ma-md",onClick:D}),(0,o.Wm)(I,{title:"Grupos",rows:k.value,columns:q,"row-key":"name",loading:a.value},{"body-cell-actions":(0,o.w5)((e=>[(0,o.Wm)(t,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{color:"yellow",icon:"mode_edit",class:"q-mx-sm",onClick:l=>A(e.row)},null,8,["onClick"]),(0,o.wy)((0,o.Wm)(n,{color:"red",icon:"delete",onClick:l=>G(e.row)},null,8,["onClick"]),[[s.F8,"A"==e.row.state]]),(0,o.wy)((0,o.Wm)(n,{color:"green",icon:"add",onClick:l=>Q(e.row)},null,8,["onClick"]),[[s.F8,"A"!=e.row.state]])])),_:2},1032,["props"])])),"body-cell-img":(0,o.w5)((e=>[(0,o.Wm)(t,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{rounded:""},{default:(0,o.w5)((()=>[(0,o._)("img",{src:null==e.row.image?"https://i.imgur.com/wKV0Jmy.png":e.row.image,alt:"No Tiene Imagen",size:"100px"},null,8,m)])),_:2},1024)])),_:2},1032,["props"])])),loading:(0,o.w5)((()=>[(0,o.Wm)(T,{showing:"",color:"primary"})])),_:1},8,["rows","loading"])]),(0,o.Wm)(E,{modelValue:W.value,"onUpdate:modelValue":l[0]||(l[0]=e=>W.value=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{style:{width:"300px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(S,{class:"q-pt-none"},{default:(0,o.w5)((()=>[d])),_:1}),(0,o.Wm)(j,{align:"right",class:"bg-white text-teal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(n,{flat:"",label:"Si",color:"red",onClick:z},null,512),[[le]]),(0,o.wy)((0,o.Wm)(n,{flat:"",label:"No"},null,512),[[le]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(E,{modelValue:h.value,"onUpdate:modelValue":l[3]||(l[3]=e=>h.value=e),"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{style:{width:"900px","max-width":"80vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(R,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(J),(0,o.wy)(((0,o.wg)(),(0,o.j4)(n,{dense:"",flat:"",icon:"close"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[p])),_:1})])),_:1})),[[le]])])),_:1}),(0,o.Wm)(S,{class:"col q-pt-none q-mt-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(Y,{src:"https://i.imgur.com/wKV0Jmy.png"==C.img_url?"https://i.imgur.com/wKV0Jmy.png":C.img_url,"spinner-color":"white",style:{height:"140px","max-width":"150px",border:"yellow 5px solid"}},null,8,["src"])]),(0,o.Wm)(ee,{onReset:e.onReset,class:"q-gutter-md row justify-center q-mt-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o.Wm)(L,{filled:"",class:"col-8",modelValue:C.name,"onUpdate:modelValue":l[1]||(l[1]=e=>C.name=e),label:"Nombre del Grupo","lazy-rules":"",rules:[e=>e&&e.length>0||"Obligatorio"]},null,8,["modelValue","rules"]),(0,o.Wm)(L,{filled:"",class:"col-8",modelValue:C.addres,"onUpdate:modelValue":l[2]||(l[2]=e=>C.addres=e),label:"Dirección","lazy-rules":"",rules:[e=>e&&e.length>0||"Obligatorio"]},null,8,["modelValue","rules"]),(0,o.Wm)($,{"field-name":"image",factory:N,onUploaded:O,style:{"max-width":"280px"}}),(0,o.wy)((0,o.Wm)(n,{onClick:U,class:"q-mt-sm",color:"warning"},{default:(0,o.w5)((()=>[f])),_:1},512),[[s.F8,b.value]])]),(0,o.wy)((0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.units,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,class:"row q-mt-sm"},[(0,o.Wm)(L,{square:"",outlined:"",label:"Nombre de unidad",modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,class:"q-mb-sm col-7","lazy-rules":"",rules:[e=>e&&e.length>0||"Obligatorio"]},{append:(0,o.w5)((()=>[(0,o.Wm)(M,{name:"add",class:"cursor-pointer",onClick:l=>Z(e)},null,8,["onClick"]),(0,o.Wm)(M,{name:"close",class:"cursor-pointer",onClick:l=>x(e,C.units)},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"]),(0,o.Wm)(X,{outlined:"",options:v,modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,class:"col-3 q-ml-sm",rules:[e=>e&&e.length>0||"Obligatorio"]},null,8,["modelValue","onUpdate:modelValue","rules"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.teams,(l=>((0,o.wg)(),(0,o.iD)("div",{key:l.id,class:"col-7"},[(0,o.Wm)(L,{square:"",outlined:"",label:"Nombre de equipo",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,class:"q-ml-sm","lazy-rules":"",rules:[e=>e&&e.length>0||"Obligatorio"],"bg-color":"warning"},{append:(0,o.w5)((()=>[(0,o.Wm)(M,{name:"close",class:"cursor-pointer",onClick:a=>x(l,e.teams)},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])])))),128))])))),128))],512),[[s.F8,b.value]])])),_:1},8,["onReset"])])),_:1}),(0,o.Wm)(j,{align:"right",class:"bg-white text-teal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(n,{flat:"",label:"Actualizar",onClick:H},null,512),[[s.F8,!b.value]]),(0,o.wy)((0,o.Wm)(n,{flat:"",label:"Guardar",onClick:F},null,512),[[s.F8,b.value]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(E,{modelValue:V.value,"onUpdate:modelValue":l[4]||(l[4]=e=>V.value=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(S,{class:"row items-center"},{default:(0,o.w5)((()=>[_])),_:1}),(0,o.Wm)(j,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[le]]),(0,o.wy)((0,o.Wm)(n,{flat:"",label:"Eliminar",color:"primary",onClick:z},null,512),[[le]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var h=a(8240),W=a(3243),q=a(3884),v=a(5096),k=a(6941),V=a(6778),C=a(151),Z=a(5589),Q=a(9367),x=a(846),U=a(3747),A=a(2025),D=a(8870),H=a(4027),T=a(5269),G=a(4842),z=a(3768),F=a(4554),N=a(8516),O=a(677),I=a(7518),S=a.n(I);const j=b,K=j;S()(b,"components",{QBtn:h.Z,QTable:W.Z,QTd:q.Z,QAvatar:v.Z,QInnerLoading:k.Z,QDialog:V.Z,QCard:C.Z,QCardSection:Z.Z,QCardActions:Q.Z,QBar:x.Z,QToolbarTitle:U.Z,QSpace:A.Z,QTooltip:D.Z,QImg:H.Z,QForm:T.Z,QInput:G.Z,QUploader:z.Z,QIcon:F.Z,QSelect:N.Z}),S()(b,"directives",{ClosePopup:O.Z})}}]);