"use strict";(globalThis["webpackChunktesis_scout_front"]=globalThis["webpackChunktesis_scout_front"]||[]).push([[79],{5079:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Y});var o=a(3673),t=a(1959),n=a(8880),u=a(2323),i=a(386),d=a(2591),s=a(78),m=a(4780),c=a(9582),p=(a(9814),a(2862)),r=a(8825);const w={class:"q-pa-md"},v=(0,o.Uk)("Plan de Adelanto"),g=(0,o.Uk)("AsociaciÃ³n de Scouts del Guayas"),b=(0,o.Uk)("Close"),f=(0,o._)("div",{class:"text-h6"},"Nuevo Beneficiario Scout",-1),V=(0,o._)("div",{class:"text-h6"},"Asigna al scout",-1),_={class:"text-center"},W={__name:"Scout",setup(e){const l=(0,p.U)(),a=(0,r.Z)(),W=(0,c.tv)(),Z=[{name:"name",required:!0,label:"Nombre",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"age",align:"left",label:"Edad",field:e=>{const l=new Date(e.born_date).getFullYear(),a=(new Date).getFullYear();return a-l},sortable:!0},{name:"group",align:"left",label:"Grupo",field:e=>""!=e.group_name?A.value:e.group_name,sortable:!0},{name:"unit",align:"center",label:"Unidad",field:e=>e.type,sortable:!0},{name:"actions",label:"Acciones",align:"center"}],h=["+O","-O","+A","-A","-B","+B","-AB","+AB"],y=(0,t.iH)(!1),U=(0,t.iH)(!1),q=["1","0"],k=(0,t.iH)([]),Q=(0,t.iH)([]),S=(0,t.iH)([]),B=(0,t.iH)(!1),C=(0,t.iH)([]),T=(0,t.iH)(""),x=(0,t.iH)(""),A=(0,t.iH)(""),D=(0,t.qj)({name:"",unitId:"",lastName:"",dni:"",bornDate:"",typeBlood:"",phone:"",email:"",image:"",nacionality:"",groupId:"",gender:"",id:"",type:""}),H=async e=>{const l=await s.Z.getUnitByGroup(e);S.value=l},I=async()=>{const e=await d.Z.store(D);e.success&&(B.value=!1,N())},G=async()=>{const e=await d.Z.put(D.id,D);e.success&&(N(),B.value=!1)},N=async()=>{const e=await d.Z.getScouts();console.log(e),k.value=e.scouts},P=async()=>{if(5==l.role){const e=await d.Z.getByDirecting();A.value=e.group,k.value=e.scouts}else{const e=await d.Z.getByGroup();k.value=e.scouts,A.value=e.group}},F=async()=>{a.loading.show();const e=await i.Z.getGroups();Q.value=e,a.loading.hide()},z=()=>{m.Z.teamsByUnit(T.value).then((e=>{C.value=e.teams,console.log(e)}))},Y=e=>{U.value=!0,D.name=e.name,D.lastName=e.last_name,D.id=e.id,d.Z.getTeamUnit(e.id).then((e=>{1==e.success&&null!=e.unit&&(T.value=e.unit.teams[0].unit_id,x.value=e.unit.teams[0].id)}))},E=()=>{m.Z.addTeamScout({team_id:x.value,scout_id:D.id}).then((e=>{e.success&&(U.value=!1)}))},j=e=>{d.Z.validateHasTeam(e.id).then((l=>{l.scoutTeam?W.push({name:"AdvancePlanScout",params:{scoutId:e.id}}):alert("El usuario no ha sido asignado a un team")}))};return(0,o.YP)((()=>D.groupId),H),(0,o.YP)((()=>T.value),z),(0,o.wF)((()=>{P(),F(),s.Z.getUnitsDirecting().then((e=>{S.value=e}))})),(e,a)=>{const i=(0,o.up)("q-btn"),d=(0,o.up)("q-td"),s=(0,o.up)("q-table"),m=(0,o.up)("q-toolbar-title"),c=(0,o.up)("q-space"),p=(0,o.up)("q-tooltip"),r=(0,o.up)("q-bar"),W=(0,o.up)("q-card-section"),A=(0,o.up)("q-input"),N=(0,o.up)("q-select"),P=(0,o.up)("q-date"),F=(0,o.up)("q-popup-proxy"),O=(0,o.up)("q-icon"),$=(0,o.up)("q-form"),J=(0,o.up)("q-card-actions"),K=(0,o.up)("q-card"),L=(0,o.up)("q-dialog"),M=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",w,[(0,o.Wm)(s,{title:"Beneficiarios Scouts",rows:k.value,columns:Z,"row-key":"name"},{"body-cell-actions":(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[5!=(0,t.SU)(l).role?((0,o.wg)(),(0,o.j4)(i,{key:0,color:"blue",icon:"settings",onClick:l=>Y(e.row)},null,8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(i,{color:"green",icon:"task",onClick:l=>j(e.row),class:"q-ml-sm"},{default:(0,o.w5)((()=>[v])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])]),(0,o.Wm)(L,{modelValue:B.value,"onUpdate:modelValue":a[12]||(a[12]=e=>B.value=e),persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[g])),_:1}),(0,o.Wm)(c),(0,o.wy)(((0,o.wg)(),(0,o.j4)(i,{dense:"",flat:"",icon:"close"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[b])),_:1})])),_:1})),[[M]])])),_:1}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(W,{class:"col q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{class:"q-gutter-md row"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.name,"onUpdate:modelValue":a[0]||(a[0]=e=>D.name=e),label:"Nombre"},null,8,["modelValue"]),(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.lastName,"onUpdate:modelValue":a[1]||(a[1]=e=>D.lastName=e),label:"Apellido"},null,8,["modelValue"]),(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.dni,"onUpdate:modelValue":a[2]||(a[2]=e=>D.dni=e),label:"Cedula"},null,8,["modelValue"]),(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>D.phone=e),label:"Telefono"},null,8,["modelValue"]),(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.email,"onUpdate:modelValue":a[4]||(a[4]=e=>D.email=e),label:"Email"},null,8,["modelValue"]),(0,o.Wm)(N,{class:"col-4",filled:"",options:h,modelValue:D.typeBlood,"onUpdate:modelValue":a[5]||(a[5]=e=>D.typeBlood=e),label:"Tipo de Sangre"},null,8,["modelValue"]),(0,o.Wm)(N,{class:"col-4","emit-value":"","map-options":"",modelValue:D.gender,"onUpdate:modelValue":a[6]||(a[6]=e=>D.gender=e),options:q,label:"Genero"},null,8,["modelValue"]),(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.bornDate,"onUpdate:modelValue":a[8]||(a[8]=e=>D.bornDate=e),mask:"date",rules:["date"]},{append:(0,o.w5)((()=>[(0,o.Wm)(O,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,null,{default:(0,o.w5)((()=>[(0,o.Wm)(P,{modelValue:D.bornDate,"onUpdate:modelValue":a[7]||(a[7]=e=>D.bornDate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(N,{class:"col-4","emit-value":"","map-options":"",modelValue:D.groupId,"onUpdate:modelValue":a[9]||(a[9]=e=>D.groupId=e),options:Q.value,"option-value":"id","option-label":"name",onInput:H,label:"Selecciona un Grupo"},null,8,["modelValue","options"]),(0,o.Wm)(N,{class:"col-4","emit-value":"","map-options":"",modelValue:D.unitId,"onUpdate:modelValue":a[10]||(a[10]=e=>D.unitId=e),options:S.value,"option-value":"id","option-label":"name",label:"Selecciona una unidad"},null,8,["modelValue","options"]),(0,o.Wm)(A,{class:"col-4",filled:"",modelValue:D.nacionality,"onUpdate:modelValue":a[11]||(a[11]=e=>D.nacionality=e),label:"Nacionalidad"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(J,{align:"right",class:"bg-white text-teal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(i,{flat:"",label:"Guardar",onClick:I},null,512),[[n.F8,y.value]]),(0,o.wy)((0,o.Wm)(i,{flat:"",label:"Actualizar",onClick:G},null,512),[[n.F8,!y.value]])])),_:1}),(0,o.Uk)(" "+(0,u.zw)(D),1)])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(L,{modelValue:U.value,"onUpdate:modelValue":a[15]||(a[15]=e=>U.value=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{style:{width:"700px","max-width":"80vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[V])),_:1}),(0,o.Wm)(W,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o._)("div",_,[(0,o._)("h5",null,(0,u.zw)(D.name)+" "+(0,u.zw)(D.lastName),1)]),(0,o.Wm)(N,{modelValue:T.value,"onUpdate:modelValue":a[13]||(a[13]=e=>T.value=e),options:S.value,"option-label":"name","emit-value":"","map-options":"","option-value":"id",label:"Selecciona una Unidad",onInput:z},null,8,["modelValue","options"]),(0,o.Wm)(N,{modelValue:x.value,"onUpdate:modelValue":a[14]||(a[14]=e=>x.value=e),label:"Selecciona un Equipo","emit-value":"","map-options":"","option-label":"name","option-value":"id",options:C.value},null,8,["modelValue","options"])])),_:1})])),_:1}),(0,o.Wm)(J,{align:"right",class:"bg-white text-teal"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{flat:"",label:"Guardar",onClick:E})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var Z=a(8240),h=a(3243),y=a(3884),U=a(6778),q=a(151),k=a(846),Q=a(3747),S=a(2025),B=a(8870),C=a(5589),T=a(5269),x=a(4842),A=a(8516),D=a(4554),H=a(3944),I=a(6915),G=a(9367),N=a(677),P=a(7518),F=a.n(P);const z=W,Y=z;F()(W,"components",{QBtn:Z.Z,QTable:h.Z,QTd:y.Z,QDialog:U.Z,QCard:q.Z,QBar:k.Z,QToolbarTitle:Q.Z,QSpace:S.Z,QTooltip:B.Z,QCardSection:C.Z,QForm:T.Z,QInput:x.Z,QSelect:A.Z,QIcon:D.Z,QPopupProxy:H.Z,QDate:I.Z,QCardActions:G.Z}),F()(W,"directives",{ClosePopup:N.Z})}}]);