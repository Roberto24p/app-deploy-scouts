"use strict";(globalThis["webpackChunktesis_scout_front"]=globalThis["webpackChunktesis_scout_front"]||[]).push([[283],{3283:(e,l,a)=>{a.r(l),a.d(l,{default:()=>F});var t=a(3673),s=a(8880),o=a(744),i=a.n(o),u=a(1959),d=a(9582),c=a(8825);const n={class:"row"},r={class:"col-lg-7 col-md-7 col-md-7"},m={class:"col-lg-5 col-md-5 col-xs-12 q-pa-md"},p=(0,t._)("div",{class:"text-center"},[(0,t._)("img",{src:i(),style:{height:"300px",width:"300px"},alt:""})],-1),v=(0,t._)("div",{class:"col-8"}," Recupera tu contraseña ",-1),g={class:"q-pa-sm col-sm-12 q-mb-md"},w=(0,t._)("div",{class:"text-center"},[(0,t._)("img",{src:i(),style:{height:"300px",width:"300px"},alt:""})],-1),y=(0,t._)("div",{class:"col-8"}," Ingresa tu nueva contraseña ",-1),h={class:"q-pa-sm col-sm-12 q-mb-md"},f=(0,t._)("div",{class:"text-h6",style:{color:"green"}},"Actualización correcta",-1),_=(0,t.Uk)(" Redirigiendo... "),b=(0,t._)("div",{class:"text-h6",style:{color:"green"}},"Verifica tu correo",-1),V=(0,t.Uk)(" Hemos enviado un código para validar tu correo electrónico "),q={__name:"RecoverPassword",setup(e){const l=(0,c.Z)(),a=(0,d.tv)(),o=(0,u.qj)({username:"",codValidate:""}),i=(0,u.iH)(""),q=(0,u.iH)(!1),W=(0,u.iH)(!1),x=(0,u.iH)(!1),C=(0,u.iH)(""),k=(0,u.iH)(""),H=(0,u.iH)(!1),U=async()=>{l.loading.show();const e=await fetch(`http://157.245.142.215/api-scouts/public/api/recover/password/validateemail/${o.username}`),a=await e.json();a.success?(x.value=!0,H.value=!0,console.log(H.value)):l.notify({type:"negative",message:a.message,timeout:2e3}),l.loading.hide()},Z=async()=>{if(l.loading.show(),""==i.value)return l.notify({type:"negative",message:"Ingrese un codigo",timeout:2e3}),l.loading.hide(),0;const e=await fetch(`http://157.245.142.215/api-scouts/public/api/recover/password/validateCode/${i.value}`),a=await e.json();a.success?(W.value=!0,l.notify({type:"positive",message:"Codigo correcto",timeout:2e3})):l.notify({type:"negative",message:"Codigo incorrecto",timeout:2e3}),l.loading.hide()},Q=async()=>{if(C.value==k.value&&""!=C.value&&""!=k.value){const e=await fetch("http://157.245.142.215/api-scouts/public/api/recover/password/recover/",{body:JSON.stringify({code:i.value,password:C.value}),headers:{"Content-Type":"application/json"},method:"POST"}),l=await e.json();l.success&&(setTimeout((()=>{a.push("/login")}),2e3),q.value=!0)}else l.notify({type:"negative",message:"Las contraseñas deben de coincidir",timeout:2e3})};return(e,l)=>{const a=(0,t.up)("q-img"),u=(0,t.up)("q-input"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-form"),j=(0,t.up)("q-card-section"),z=(0,t.up)("q-card"),F=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",n,[(0,t._)("div",r,[(0,t.Wm)(a,{height:"649px",src:"https://c1.wallpaperflare.com/preview/688/239/658/boy-scout-scouting-asia.jpg"})]),(0,t._)("div",m,[(0,t.wy)((0,t.Wm)(c,null,{default:(0,t.w5)((()=>[p,v,(0,t._)("div",g,[(0,t.Wm)(u,{filled:"",modelValue:o.username,"onUpdate:modelValue":l[0]||(l[0]=e=>o.username=e),label:"Correo",hint:"","lazy-rules":""},null,8,["modelValue"]),(0,t.wy)((0,t.Wm)(u,{filled:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),label:"Validar codigo",hint:"","lazy-rules":""},null,8,["modelValue"]),[[s.F8,H.value]])]),(0,t.wy)((0,t.Wm)(d,{label:"Enviar",class:"q-mt-md",style:{width:"100%"},type:"submit",color:"primary",onClick:U},null,512),[[s.F8,!H.value]]),(0,t.wy)((0,t.Wm)(d,{label:"Validar codigo",class:"q-mt-md",style:{width:"100%"},type:"submit",color:"primary",onClick:Z},null,512),[[s.F8,H.value]])])),_:1},512),[[s.F8,!W.value]]),(0,t.wy)((0,t.Wm)(c,null,{default:(0,t.w5)((()=>[w,y,(0,t._)("div",h,[(0,t.Wm)(u,{filled:"",modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=e=>C.value=e),label:"password",hint:"","lazy-rules":"",type:"password"},null,8,["modelValue"]),(0,t.Wm)(u,{filled:"",modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=e=>k.value=e),label:"password",hint:"","lazy-rules":"",type:"password",rules:[e=>e==C.value||"No son iguales las contraseñas"]},null,8,["modelValue","rules"])]),(0,t.Wm)(d,{label:"Actualizar ",class:"q-mt-md",style:{width:"100%"},type:"submit",color:"primary",onClick:Q})])),_:1},512),[[s.F8,W.value]])])]),(0,t.Wm)(F,{modelValue:q.value,"onUpdate:modelValue":l[4]||(l[4]=e=>q.value=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{style:{width:"300px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,null,{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(j,{class:"q-pt-none"},{default:(0,t.w5)((()=>[_])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(F,{modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{style:{width:"300px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,null,{default:(0,t.w5)((()=>[b])),_:1}),(0,t.Wm)(j,{class:"q-pt-none"},{default:(0,t.w5)((()=>[V])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var W=a(4027),x=a(5269),C=a(4842),k=a(8240),H=a(6778),U=a(151),Z=a(5589),Q=a(7518),j=a.n(Q);const z=q,F=z;j()(q,"components",{QImg:W.Z,QForm:x.Z,QInput:C.Z,QBtn:k.Z,QDialog:H.Z,QCard:U.Z,QCardSection:Z.Z})}}]);